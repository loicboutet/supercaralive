<div class="container mx-auto px-6 py-8">
  <div class="max-w-6xl mx-auto">
    <div class="mb-8">
      <h1 class="text-4xl font-bold text-gray-900 mb-2">Rappels d'entretien</h1>
      <p class="text-gray-600">Suivez les maintenances périodiques de vos véhicules</p>
    </div>

    <!-- Summary Cards -->
    <div class="grid md:grid-cols-3 gap-6 mb-8">
      <div class="bg-white rounded-super p-6 shadow-sm border-l-4 border-red-hero">
        <div class="flex items-center justify-between mb-2">
          <p class="text-sm text-gray-600">Urgents</p>
          <div class="w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center">
            <span class="text-xl">⚠️</span>
          </div>
        </div>
        <p class="text-3xl font-bold text-gray-900">2</p>
        <p class="text-sm text-gray-500 mt-1">À faire rapidement</p>
      </div>

      <div class="bg-white rounded-super p-6 shadow-sm border-l-4 border-yellow-hero">
        <div class="flex items-center justify-between mb-2">
          <p class="text-sm text-gray-600">À venir</p>
          <div class="w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center">
            <span class="text-xl">⏰</span>
          </div>
        </div>
        <p class="text-3xl font-bold text-gray-900">3</p>
        <p class="text-sm text-gray-500 mt-1">Dans les prochains mois</p>
      </div>

      <div class="bg-white rounded-super p-6 shadow-sm border-l-4 border-green-500">
        <div class="flex items-center justify-between mb-2">
          <p class="text-sm text-gray-600">Complétés</p>
          <div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center">
            <span class="text-xl">✓</span>
          </div>
        </div>
        <p class="text-3xl font-bold text-gray-900">8</p>
        <p class="text-sm text-gray-500 mt-1">Cette année</p>
      </div>
    </div>

    <!-- Reminders List -->
    <div class="space-y-4">
      <% 
        reminders = [
          { type: 'Vidange', vehicle: 'Peugeot 208', due_km: 80000, current_km: 78500, status: 'urgent', color: 'red' },
          { type: 'Contrôle technique', vehicle: 'Peugeot 208', due_date: Date.current + 15.days, status: 'urgent', color: 'red' },
          { type: 'Changement pneus', vehicle: 'Renault Clio', due_km: 60000, current_km: 55000, status: 'upcoming', color: 'yellow' },
          { type: 'Révision générale', vehicle: 'Peugeot 208', due_date: Date.current + 60.days, status: 'upcoming', color: 'yellow' },
          { type: 'Filtre à air', vehicle: 'Renault Clio', due_km: 65000, current_km: 55000, status: 'upcoming', color: 'yellow' },
          { type: 'Vidange', vehicle: 'Renault Clio', due_date: Date.current - 10.days, status: 'completed', color: 'green' },
        ]
      %>
      
      <% reminders.each_with_index do |reminder, i| %>
        <div class="bg-white rounded-super p-6 shadow-sm hover:shadow-md transition border-l-4 border-<%= reminder[:color] %>-hero">
          <div class="flex items-center justify-between">
            <div class="flex items-start space-x-4 flex-1">
              <div class="w-12 h-12 bg-<%= reminder[:color] == 'red' ? 'red' : reminder[:color] == 'yellow' ? 'yellow' : 'green' %>-100 rounded-lg flex items-center justify-center flex-shrink-0">
                <% if reminder[:status] == 'urgent' %>
                  <span class="text-2xl">⚠️</span>
                <% elsif reminder[:status] == 'upcoming' %>
                  <span class="text-2xl">⏰</span>
                <% else %>
                  <span class="text-2xl">✓</span>
                <% end %>
              </div>
              
              <div class="flex-1">
                <div class="flex items-center justify-between mb-2">
                  <div>
                    <h3 class="text-xl font-bold text-gray-900"><%= reminder[:type] %></h3>
                    <p class="text-sm text-gray-600"><%= reminder[:vehicle] %></p>
                  </div>
                  <% if reminder[:status] == 'urgent' %>
                    <span class="px-3 py-1 rounded-lg text-xs font-medium bg-red-100 text-red-800">Urgent</span>
                  <% elsif reminder[:status] == 'upcoming' %>
                    <span class="px-3 py-1 rounded-lg text-xs font-medium bg-yellow-100 text-yellow-800">À venir</span>
                  <% else %>
                    <span class="px-3 py-1 rounded-lg text-xs font-medium bg-green-100 text-green-800">Effectué</span>
                  <% end %>
                </div>

                <div class="grid grid-cols-2 gap-4 mb-4">
                  <% if reminder[:due_km] %>
                    <div>
                      <p class="text-xs text-gray-500">Échéance kilométrique</p>
                      <p class="text-sm font-medium text-gray-900"><%= number_with_delimiter(reminder[:due_km]) %> km</p>
                      <% if reminder[:current_km] %>
                        <div class="mt-2">
                          <div class="w-full bg-gray-200 rounded-full h-2">
                            <div class="bg-<%= reminder[:color] %>-hero h-2 rounded-full" style="width: <%= [(reminder[:current_km].to_f / reminder[:due_km] * 100), 100].min %>%"></div>
                          </div>
                          <p class="text-xs text-gray-500 mt-1">Actuel: <%= number_with_delimiter(reminder[:current_km]) %> km</p>
                        </div>
                      <% end %>
                    </div>
                  <% end %>
                  <% if reminder[:due_date] %>
                    <div>
                      <p class="text-xs text-gray-500">Date d'échéance</p>
                      <p class="text-sm font-medium text-gray-900"><%= reminder[:due_date].strftime("%d/%m/%Y") %></p>
                      <% if reminder[:status] != 'completed' %>
                        <p class="text-xs <%= reminder[:status] == 'urgent' ? 'text-red-600' : 'text-gray-500' %> mt-1">
                          <% days_left = (reminder[:due_date] - Date.current).to_i %>
                          <% if days_left < 0 %>
                            Retard de <%= days_left.abs %> jours
                          <% elsif days_left == 0 %>
                            Aujourd'hui !
                          <% else %>
                            Dans <%= days_left %> jours
                          <% end %>
                        </p>
                      <% end %>
                    </div>
                  <% end %>
                </div>

                <% if reminder[:status] != 'completed' %>
                  <div class="flex space-x-2">
                    <%= link_to client_professionals_path, class: "bg-blue-hero hover:bg-blue-dark text-white px-4 py-2 rounded-lg font-medium text-sm" do %>
                      Réserver un service
                    <% end %>
                    <button class="bg-gray-200 hover:bg-gray-300 text-gray-700 px-4 py-2 rounded-lg font-medium text-sm">
                      Rappeler plus tard
                    </button>
                    <button class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg font-medium text-sm">
                      Marquer comme fait
                    </button>
                  </div>
                <% else %>
                  <p class="text-sm text-gray-600">✓ Effectué le <%= (Date.current - 10.days).strftime("%d/%m/%Y") %></p>
                <% end %>
              </div>
            </div>
          </div>
        </div>
      <% end %>
    </div>

    <!-- Info Banner -->
    <div class="mt-8 bg-blue-50 border-l-4 border-blue-hero rounded-lg p-6">
      <div class="flex">
        <div class="flex-shrink-0">
          <svg class="h-6 w-6 text-blue-hero" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
          </svg>
        </div>
        <div class="ml-3">
          <h3 class="text-sm font-bold text-blue-800">Rappels automatiques</h3>
          <p class="text-sm text-blue-700 mt-1">
            Supercaralive vous envoie automatiquement des rappels par email pour les maintenances périodiques en fonction du kilométrage et du temps écoulé.
          </p>
        </div>
      </div>
    </div>
  </div>
</div>
