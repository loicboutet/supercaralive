<div class="container mx-auto px-6 py-8">
  <div class="flex items-center justify-between mb-8">
    <div>
      <h1 class="text-4xl font-bold text-gray-900 mb-2">Mes R√©servations</h1>
      <p class="text-gray-600">Consultez vos r√©servations en cours et pass√©es</p>
    </div>
    <%= link_to new_client_booking_path, class: "bg-red-hero hover:bg-red-dark text-white px-6 py-3 rounded-friendly font-bold inline-flex items-center" do %>
      <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
      </svg>
      Nouvelle r√©servation
    <% end %>
  </div>

  <!-- Tabs -->
  <div class="mb-6">
    <div class="border-b border-gray-200">
      <nav class="-mb-px flex space-x-8">
        <a href="#" class="border-b-2 border-red-hero text-red-hero py-4 px-1 text-sm font-medium">
          En cours
        </a>
        <a href="#" class="border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 py-4 px-1 text-sm font-medium">
          Termin√©es
        </a>
        <a href="#" class="border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 py-4 px-1 text-sm font-medium">
          Annul√©es
        </a>
      </nav>
    </div>
  </div>

  <% if @bookings&.any? %>
    <div class="space-y-4">
      <% @bookings.each do |booking| %>
        <div class="bg-white rounded-super p-6 shadow-sm hover:shadow-md transition">
          <div class="flex items-start justify-between mb-4">
            <div class="flex items-start space-x-4">
              <div class="w-16 h-16 bg-<%= booking.status == 'pending' ? 'yellow' : booking.status == 'confirmed' ? 'blue' : booking.status == 'completed' ? 'green' : 'red' %>-hero rounded-friendly flex items-center justify-center flex-shrink-0">
                <span class="text-white text-2xl">
                  <%= booking.status == 'completed' ? '‚úì' : 'üìÖ' %>
                </span>
              </div>
              <div class="flex-1">
                <div class="flex items-center space-x-2 mb-1">
                  <h3 class="text-xl font-bold text-gray-900"><%= booking.service_type %></h3>
                  <span class="px-3 py-1 rounded-friendly text-xs font-medium <%= booking.status == 'pending' ? 'bg-yellow-100 text-yellow-800' : booking.status == 'confirmed' ? 'bg-blue-100 text-blue-800' : booking.status == 'completed' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800' %>">
                    <%= booking.status == 'pending' ? 'En attente' : booking.status == 'confirmed' ? 'Confirm√©' : booking.status == 'completed' ? 'Termin√©' : 'Annul√©' %>
                  </span>
                </div>
                <p class="text-gray-600 mb-2"><strong>Professionnel:</strong> <%= booking.professional_name %></p>
                <div class="flex items-center text-sm text-gray-500 space-x-4">
                  <span class="flex items-center">
                    <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                    </svg>
                    <%= booking.scheduled_at&.strftime("%d/%m/%Y √† %H:%M") %>
                  </span>
                  <span class="flex items-center">
                    <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    <%= booking.vehicle_model %>
                  </span>
                </div>
              </div>
            </div>
            <div class="text-right">
              <% if booking.price.present? %>
                <p class="text-2xl font-bold text-gray-900"><%= number_to_currency(booking.price, unit: "‚Ç¨", separator: ",", delimiter: " ", format: "%n %u") %></p>
              <% else %>
                <p class="text-sm text-gray-500">Prix √† d√©finir</p>
              <% end %>
            </div>
          </div>

          <% if booking.description.present? %>
            <div class="mb-4 p-4 bg-soft rounded-friendly">
              <p class="text-sm text-gray-600"><strong>Description:</strong> <%= booking.description %></p>
            </div>
          <% end %>

          <div class="flex space-x-2 pt-4 border-t border-gray-200">
            <%= link_to client_booking_path(booking), class: "flex-1 bg-blue-hero hover:bg-blue-dark text-white px-4 py-2 rounded-friendly font-medium text-center text-sm" do %>
              Voir d√©tails
            <% end %>
            <% if booking.status == 'pending' %>
              <%= link_to edit_client_booking_path(booking), class: "flex-1 bg-yellow-hero hover:bg-opacity-90 text-gray-900 px-4 py-2 rounded-friendly font-medium text-center text-sm" do %>
                Modifier
              <% end %>
              <%= button_to cancel_client_booking_path(booking), method: :patch, data: { confirm: "√ätes-vous s√ªr de vouloir annuler cette r√©servation ?" }, class: "flex-1 bg-gray-200 hover:bg-gray-300 text-gray-700 px-4 py-2 rounded-friendly font-medium text-sm" do %>
                Annuler
              <% end %>
            <% end %>
            <% if booking.status == 'completed' && !booking.reviewed? %>
              <%= link_to new_client_review_path(booking_id: booking.id), class: "flex-1 bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-friendly font-medium text-center text-sm" do %>
                Laisser un avis
              <% end %>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>

    <!-- Pagination -->
    <div class="mt-8 flex justify-center">
      <nav class="flex space-x-2">
        <a href="#" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-friendly hover:bg-gray-300">Pr√©c√©dent</a>
        <a href="#" class="px-4 py-2 bg-red-hero text-white rounded-friendly">1</a>
        <a href="#" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-friendly hover:bg-gray-300">2</a>
        <a href="#" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-friendly hover:bg-gray-300">3</a>
        <a href="#" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-friendly hover:bg-gray-300">Suivant</a>
      </nav>
    </div>
  <% else %>
    <div class="bg-soft rounded-super p-12 text-center">
      <div class="w-20 h-20 bg-gray-200 rounded-friendly flex items-center justify-center mx-auto mb-4">
        <span class="text-4xl">üìÖ</span>
      </div>
      <h3 class="text-2xl font-bold text-gray-900 mb-2">Aucune r√©servation</h3>
      <p class="text-gray-600 mb-6">Vous n'avez pas encore de r√©servation. Trouvez un professionnel et r√©servez votre premier service !</p>
      <%= link_to new_client_booking_path, class: "bg-red-hero hover:bg-red-dark text-white px-8 py-3 rounded-friendly font-bold inline-flex items-center" do %>
        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
        </svg>
        Cr√©er ma premi√®re r√©servation
      <% end %>
    </div>
  <% end %>
</div>
